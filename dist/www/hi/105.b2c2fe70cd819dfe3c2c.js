(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{"+BZc":function(l,n,t){"use strict";t.r(n);var i=t("8Y7J");class u{}var o=t("pMnS"),e=t("bujt"),a=t("Fwaw"),c=t("5GAg"),s=t("omvX"),b=t("Xd0L"),r=t("/HVE"),f=t("Mr+X"),h=t("SVse"),p=t("Gi4r"),d=t("5fvw");class g{constructor(){this.notificationEvents=d.a}ngOnInit(){}}var m=i.sb({encapsulation:0,styles:[["mat-icon[_ngcontent-%COMP%]{vertical-align:text-bottom}"]],data:{}});function v(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" adjust "]))],null,null)}function N(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" playlist_play "]))],null,null)}function S(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" menu_book "]))],null,null)}function w(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function x(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function k(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function E(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function C(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function M(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),i.Ob(-1,null,[" create "]))],null,null)}function A(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,20,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),i.tb(1,16384,null,0,h.v,[],{ngSwitch:[0,"ngSwitch"]},null),i.tb(2,9158656,null,0,p.b,[i.k,p.d,[8,null],[2,p.a]],null,null),(l()(),i.kb(16777216,null,0,1,null,v)),i.tb(4,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,N)),i.tb(6,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,S)),i.tb(8,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,w)),i.tb(10,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,x)),i.tb(12,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,k)),i.tb(14,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,E)),i.tb(16,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,C)),i.tb(18,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),i.kb(16777216,null,0,1,null,M)),i.tb(20,278528,null,0,h.w,[i.P,i.M,h.v],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(l,n){var t=n.component;l(n,1,0,t.notificationEvent),l(n,2,0),l(n,4,0,t.notificationEvents.ShareGoal),l(n,6,0,t.notificationEvents.SharePlaylist),l(n,8,0,t.notificationEvents.ShareContent),l(n,10,0,t.notificationEvents.AddContributor),l(n,12,0,t.notificationEvents.SendContent),l(n,14,0,t.notificationEvents.RejectContent),l(n,16,0,t.notificationEvents.PublishContent),l(n,18,0,t.notificationEvents.DelegateContent),l(n,20,0,t.notificationEvents.ApproveContent)}),(function(l,n){l(n,0,0,i.Gb(n,2).inline,"primary"!==i.Gb(n,2).color&&"accent"!==i.Gb(n,2).color&&"warn"!==i.Gb(n,2).color)}))}var P=t("TtEo"),O=t("02hT");t("g6cB");class I{constructor(l){this.http=l,this.API_BASE="/apis/protected/v8/user/notifications",this.BADGE_COUNT="/apis/protected/v8/user/iconBadge/unseenNotificationCount"}getNotifications(l,n,t){const i={};return l&&(i.classification=l),n&&(i.size=n.toString()),t&&(i.page=t),this.http.get(""+this.API_BASE,{params:i})}getCount(){return this.http.get(this.BADGE_COUNT)}updateNotificationSeenStatus(l,n,t=!0){let i=this.API_BASE;return l&&n?(i+=`/${l}/${n}`,this.http.patch(i,{seen:t})):this.http.patch(i,{})}}var G=t("n4nJ"),Q=t("KqfI");class F{constructor(l,n,t,i){this.configSvc=l,this.notificationApi=n,this.notificationSvc=t,this.router=i,this.showMarkAsRead=!1,this.pageNavbar=this.configSvc.pageNavBar,this.hideSeen=!0,this.pageSize=5,this.actionNotifications=[],this.infoNotifications=[],this.actionNotificationsFetchStatus="none",this.infoNotificationsFetchStatus="none"}ngOnInit(){this.fetchActionNotifications(),this.fetchInfoNotifications(),this.getCount()}fetchActionNotifications(){this.actionNotificationsFetchStatus="fetching",this.notificationApi.getNotifications(d.b.Action,this.pageSize,this.actionNotificationsNextPage).subscribe(l=>{this.actionNotifications=this.actionNotifications.concat(l.data),this.actionNotificationsNextPage=l.page,this.actionNotificationsFetchStatus="done"},()=>{this.actionNotificationsFetchStatus="error"})}fetchInfoNotifications(){this.infoNotificationsFetchStatus="fetching",this.notificationApi.getNotifications(d.b.Information,this.pageSize,this.infoNotificationsNextPage).subscribe(l=>{this.infoNotifications=this.infoNotifications.concat(l.data),this.infoNotificationsNextPage=l.page,this.infoNotificationsFetchStatus="done"},()=>{this.infoNotificationsFetchStatus="error"})}onClickNotification(l){l.seen||this.notificationApi.updateNotificationSeenStatus(l.notificationId,l.classifiedAs).subscribe(()=>{l.seen=!0},Q.a),this.notificationSvc.mapRoute(l)}getCount(){this.notificationApi.getCount().subscribe(l=>{l>0&&(this.showMarkAsRead=!0)})}readAllNotifications(){this.notificationApi.updateNotificationSeenStatus().subscribe(l=>{this.router.navigate([],{queryParams:{ts:Date.now()}}),this.showMarkAsRead=!1,this.actionNotifications.forEach(l=>{l.seen=!0}),this.infoNotifications.forEach(l=>{l.seen=!0})})}displayInfoNotifications(){return this.allSeen=this.infoNotifications.filter(l=>!l.seen),this.hideSeen?this.infoNotifications.filter(l=>!l.seen):this.infoNotifications}displayActionNotifications(){return this.allSeen=this.infoNotifications.filter(l=>!l.seen),this.hideSeen?this.actionNotifications.filter(l=>!l.seen):this.actionNotifications}toggleSeen(){this.hideSeen=!this.hideSeen}toggleButtonText(){return this.hideSeen?"Show All":"Hide Read"}}var y=t("88ff"),_=t("iInd"),$=i.sb({encapsulation:0,styles:[[".container-balanced[_ngcontent-%COMP%]{max-width:1160px;margin-left:auto!important;margin-right:auto!important}.text-right[_ngcontent-%COMP%]{float:right!important}"]],data:{}});function B(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,2,"button",[["class","text-right"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.readAllNotifications()&&i),i}),e.d,e.b)),i.tb(1,180224,null,0,a.b,[i.k,c.h,[2,s.a]],{disabled:[0,"disabled"]},null),(l()(),i.Ob(-1,0,[" Mark all as read "]))],(function(l,n){l(n,1,0,!n.component.showMarkAsRead)}),(function(l,n){l(n,0,0,i.Gb(n,1).disabled||null,"NoopAnimations"===i.Gb(n,1)._animationMode)}))}function R(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,15,null,null,null,null,null,null,null)),(l()(),i.ub(1,0,null,null,12,"li",[["class","p-4 cursor-pointer mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.onClickNotification(l.context.$implicit)&&i),i}),null,null)),i.tb(2,212992,null,0,b.v,[i.k,i.y,r.a,[2,b.k],[2,s.a]],null,null),(l()(),i.ub(3,0,null,null,10,"div",[["class","flex flex-between"]],null,null,null,null,null)),(l()(),i.ub(4,0,null,null,2,"div",[["class","flex flex-col flex-center w-1/10"]],null,null,null,null,null)),(l()(),i.ub(5,0,null,null,1,"ws-app-notification-event",[],null,null,null,A,m)),i.tb(6,114688,null,0,g,[],{notificationEvent:[0,"notificationEvent"]},null),(l()(),i.ub(7,0,null,null,2,"div",[["class","mat-body flex-grow flex flex-col flex-center px-2"]],null,null,null,null,null)),(l()(),i.ub(8,0,null,null,1,"span",[],[[4,"font-weight",null]],null,null,null,null)),(l()(),i.Ob(9,null,[" "," "])),(l()(),i.ub(10,0,null,null,3,"div",[["class","mat-caption w-2/10 flex flex-col flex-center text-right"]],null,null,null,null,null)),(l()(),i.ub(11,0,null,null,2,"span",[],[[4,"font-weight",null]],null,null,null,null)),(l()(),i.Ob(12,null,[" "," "])),i.Kb(13,2),(l()(),i.ub(14,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,P.b,P.a)),i.tb(15,49152,null,0,O.a,[],null,null)],(function(l,n){l(n,2,0),l(n,6,0,n.context.$implicit.eventId)}),(function(l,n){l(n,1,0,i.Gb(n,2).unbounded),l(n,8,0,n.context.$implicit.seen?"inherit":500),l(n,9,0,n.context.$implicit.message),l(n,11,0,n.context.$implicit.seen?"inherit":500);var t=i.Pb(n,12,0,l(n,13,0,i.Gb(n.parent.parent,0),n.context.$implicit.receivedOn,"dd MMM"));l(n,12,0,t),l(n,14,0,i.Gb(n,15).vertical?"vertical":"horizontal",i.Gb(n,15).vertical,!i.Gb(n,15).vertical,i.Gb(n,15).inset)}))}function z(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,2,"button",[["mat-flat-button",""]],[[8,"hidden",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.fetchActionNotifications()&&i),i}),e.d,e.b)),i.tb(1,180224,null,0,a.b,[i.k,c.h,[2,s.a]],{disabled:[0,"disabled"]},null),(l()(),i.Ob(-1,0,[" View More "]))],(function(l,n){l(n,1,0,"fetching"===n.component.actionNotificationsFetchStatus)}),(function(l,n){l(n,0,0,n.component.allSeen.length<=0,i.Gb(n,1).disabled||null,"NoopAnimations"===i.Gb(n,1)._animationMode)}))}function T(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,8,"div",[["class","mb-8"]],null,null,null,null,null)),(l()(),i.ub(1,0,null,null,1,"h3",[["class","mat-h3"]],null,null,null,null,null)),(l()(),i.Ob(-1,null,["For Your Action"])),(l()(),i.ub(3,0,null,null,2,"ul",[["class","list-none p-0 mb-4 mat-toolbar"]],null,null,null,null,null)),(l()(),i.kb(16777216,null,null,1,null,R)),i.tb(5,278528,null,0,h.o,[i.P,i.M,i.r],{ngForOf:[0,"ngForOf"]},null),(l()(),i.ub(6,0,null,null,2,"div",[["class","mt-4"]],null,null,null,null,null)),(l()(),i.kb(16777216,null,null,1,null,z)),i.tb(8,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,5,0,t.displayActionNotifications()),l(n,8,0,t.actionNotificationsNextPage&&"-1"!==t.actionNotificationsNextPage)}),null)}function j(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,15,null,null,null,null,null,null,null)),(l()(),i.ub(1,0,null,null,12,"li",[["class","p-4 cursor-pointer mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.onClickNotification(l.context.$implicit)&&i),i}),null,null)),i.tb(2,212992,null,0,b.v,[i.k,i.y,r.a,[2,b.k],[2,s.a]],null,null),(l()(),i.ub(3,0,null,null,10,"div",[["class","flex flex-between"]],null,null,null,null,null)),(l()(),i.ub(4,0,null,null,2,"div",[["class","flex flex-col flex-center"]],null,null,null,null,null)),(l()(),i.ub(5,0,null,null,1,"ws-app-notification-event",[],null,null,null,A,m)),i.tb(6,114688,null,0,g,[],{notificationEvent:[0,"notificationEvent"]},null),(l()(),i.ub(7,0,null,null,2,"div",[["class","mat-body flex-grow flex flex-col flex-center px-2"]],null,null,null,null,null)),(l()(),i.ub(8,0,null,null,1,"span",[],[[4,"font-weight",null]],null,null,null,null)),(l()(),i.Ob(9,null,[" "," "])),(l()(),i.ub(10,0,null,null,3,"div",[["class","mat-caption w-2/10 flex flex-col flex-center text-right"]],null,null,null,null,null)),(l()(),i.ub(11,0,null,null,2,"span",[],[[4,"font-weight",null]],null,null,null,null)),(l()(),i.Ob(12,null,[" "," "])),i.Kb(13,2),(l()(),i.ub(14,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,P.b,P.a)),i.tb(15,49152,null,0,O.a,[],null,null)],(function(l,n){l(n,2,0),l(n,6,0,n.context.$implicit.eventId)}),(function(l,n){l(n,1,0,i.Gb(n,2).unbounded),l(n,8,0,n.context.$implicit.seen?"inherit":500),l(n,9,0,n.context.$implicit.message),l(n,11,0,n.context.$implicit.seen?"inherit":500);var t=i.Pb(n,12,0,l(n,13,0,i.Gb(n.parent.parent,0),n.context.$implicit.receivedOn,"dd MMM"));l(n,12,0,t),l(n,14,0,i.Gb(n,15).vertical?"vertical":"horizontal",i.Gb(n,15).vertical,!i.Gb(n,15).vertical,i.Gb(n,15).inset)}))}function D(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,2,"button",[["mat-flat-button",""]],[[8,"hidden",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.fetchInfoNotifications()&&i),i}),e.d,e.b)),i.tb(1,180224,null,0,a.b,[i.k,c.h,[2,s.a]],{disabled:[0,"disabled"]},null),(l()(),i.Ob(-1,0,[" View More "]))],(function(l,n){l(n,1,0,"fetching"===n.component.infoNotificationsFetchStatus)}),(function(l,n){l(n,0,0,n.component.allSeen.length<=0,i.Gb(n,1).disabled||null,"NoopAnimations"===i.Gb(n,1)._animationMode)}))}function V(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),i.ub(1,0,null,null,1,"h3",[["class","mat-h3"]],null,null,null,null,null)),(l()(),i.Ob(-1,null,["For Your Information"])),(l()(),i.ub(3,0,null,null,2,"ul",[["class","list-none p-0 mat-toolbar"]],null,null,null,null,null)),(l()(),i.kb(16777216,null,null,1,null,j)),i.tb(5,278528,null,0,h.o,[i.P,i.M,i.r],{ngForOf:[0,"ngForOf"]},null),(l()(),i.ub(6,0,null,null,2,"div",[["class","mt-4"]],null,null,null,null,null)),(l()(),i.kb(16777216,null,null,1,null,D)),i.tb(8,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,5,0,t.displayInfoNotifications()),l(n,8,0,t.infoNotificationsNextPage&&"-1"!==t.infoNotificationsNextPage)}),null)}function Y(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,"h4",[["class","text-center mat-h4 mt-4"]],null,null,null,null,null)),(l()(),i.Ob(-1,null,[" You do not have any notifications yet. "]))],null,null)}function q(l){return i.Qb(0,[i.Ib(0,h.e,[i.t]),(l()(),i.ub(1,0,null,null,11,"section",[["class","my-4 pt-4 pb-8 pl-4 pr-4 container-balanced"]],null,null,null,null,null)),(l()(),i.ub(2,0,null,null,2,"button",[["class","text-right"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==l.component.toggleSeen()&&i),i}),e.d,e.b)),i.tb(3,180224,null,0,a.b,[i.k,c.h,[2,s.a]],null,null),(l()(),i.Ob(4,0,[" "," "])),(l()(),i.kb(16777216,null,null,1,null,B)),i.tb(6,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(l()(),i.kb(16777216,null,null,1,null,T)),i.tb(8,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(l()(),i.kb(16777216,null,null,1,null,V)),i.tb(10,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(l()(),i.kb(16777216,null,null,1,null,Y)),i.tb(12,16384,null,0,h.p,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,6,0,t.actionNotifications.length||t.infoNotifications.length),l(n,8,0,t.actionNotifications.length),l(n,10,0,t.infoNotifications.length),l(n,12,0,"fetching"!==t.actionNotificationsFetchStatus&&"fetching"!==t.infoNotificationsFetchStatus&&!t.actionNotifications.length&&!t.infoNotifications.length)}),(function(l,n){var t=n.component;l(n,2,0,i.Gb(n,3).disabled||null,"NoopAnimations"===i.Gb(n,3)._animationMode),l(n,4,0,t.toggleButtonText())}))}function J(l){return i.Qb(0,[(l()(),i.ub(0,0,null,null,1,"ws-app-home",[],null,null,null,q,$)),i.tb(1,114688,null,0,F,[y.a,I,G.a,_.o],null,null)],(function(l,n){l(n,1,0)}),null)}var X=i.qb("ws-app-home",F,J,{},{},[]),H=t("ggGX"),K=t("IheW");class U{}var W=t("IP0z"),L=t("cUpR"),Z=t("BzsH"),ll=t("CQWV"),nl=t("CY9r");t.d(n,"RouteNotificationAppModuleNgFactory",(function(){return tl}));var tl=i.rb(u,[],(function(l){return i.Db([i.Eb(512,i.j,i.bb,[[8,[o.a,X,H.a]],[3,i.j],i.w]),i.Eb(4608,h.r,h.q,[i.t,[2,h.N]]),i.Eb(4608,I,I,[K.c]),i.Eb(4608,G.a,G.a,[_.o]),i.Eb(1073742336,h.c,h.c,[]),i.Eb(1073742336,_.s,_.s,[[2,_.x],[2,_.o]]),i.Eb(1073742336,U,U,[]),i.Eb(1073742336,W.a,W.a,[]),i.Eb(1073742336,b.l,b.l,[[2,b.d],[2,L.f]]),i.Eb(1073742336,Z.b,Z.b,[]),i.Eb(1073742336,O.b,O.b,[]),i.Eb(1073742336,r.b,r.b,[]),i.Eb(1073742336,b.w,b.w,[]),i.Eb(1073742336,a.c,a.c,[]),i.Eb(1073742336,p.c,p.c,[]),i.Eb(1073742336,ll.a,ll.a,[]),i.Eb(1073742336,nl.a,nl.a,[]),i.Eb(1073742336,u,u,[]),i.Eb(256,i.t,"hi",[]),i.Eb(1024,_.m,(function(){return[[{path:"",component:F}]]}),[])])}))}}]);