<form [formGroup]="contentForm" class="width-2-3">
  <mat-sidenav class="padding-s width-300" position="end" [fixedInViewport]="true" [(opened)]="sideNavBarOpened">
    <div class="flex header-bg">
      <h2 class="margin-left-l margin-top-l">Course Settings</h2>
      <mat-icon class="ws-mat-primary-text margin-top-l pointer cross-btn" (click)="sideNavBarOpened=false">
        clear
      </mat-icon>
    </div>
    <div class="inner-section">
      <div class="margin-right-l margin-top-l">

        <div class="margin-top-xs margin-left-xl" *ngIf="checkCondition('exclusiveContent', 'show')"
          [ngClass]="{ disable: checkCondition('exclusiveContent', 'disabled') }">
          <label>
            <div class="margin-top-xs flex flex-middle">
              <b [ngClass]="{ required: checkCondition('exclusiveContent', 'required') }">Cost</b>
              <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('exclusiveContent')">
                info
              </mat-icon>
            </div>
            <span *ngIf="infoType === 'exclusiveContent'">Is Paid Content?</span>
          </label>
          <div class="margin-top-l">
            <mat-form-field appearance="outline" class="margin-top-s"
              [ngClass]="{ 'mat-form-field-invalid': showError('exclusiveContent') }">
              <mat-select formControlName="exclusiveContent" -placeholder placeholder="--Select--">
                <mat-option [value]="true"> Paid</mat-option>
                <mat-option [value]="false"> Free </mat-option>
              </mat-select>
              <mat-error *ngIf="showError('exclusiveContent')">Cost is mandatory
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('complexityLevel', 'show')"
          [ngClass]="{ disable: checkCondition('complexityLevel', 'disabled') }">
          <label>
            <div class="margin-top-xs flex flex-middle"
              [ngClass]="{ required: checkCondition('complexityLevel', 'required') }">
              <b>Knowledge Level</b>
              <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('knowledgeLevel')">info
              </mat-icon>
            </div>
            <span *ngIf="infoType === 'knowledgeLevel'">How tough do you think the content is?</span>
          </label>
          <div class="margin-top-l">
            <mat-form-field appearance="outline" class="margin-top-s"
              [ngClass]="{ 'mat-form-field-invalid': showError('complexityLevel') }">
              <mat-select formControlName="complexityLevel" -placeholder placeholder="--Select--">
                <mat-option *ngIf="!checkCondition('complexityLevel', 'required')" [value]="null">None
                </mat-option>
                <mat-option *ngFor="let complexityLevel of complexityLevelList" [value]="complexityLevel">
                  {{ complexityLevel }}</mat-option>
              </mat-select>
              <mat-error *ngIf="showError('complexityLevel')">Knowledge Level is mandatory
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>


      <div class="margin-right-l">
        <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('fileType', 'show')"
          [ngClass]="{ disable: checkCondition('fileType', 'disabled') }">
          <label [ngClass]="{ required: checkCondition('fileType', 'required') }">
            <b>File Type</b>
          </label>
          <div class="margin-top-l">
            <mat-form-field appearance="outline" class="margin-top-s"
              [ngClass]="{ 'mat-form-field-invalid': showError('fileType') }">
              <mat-select formControlName="fileType" -placeholder placeholder="--Select--">
                <mat-option *ngIf="!checkCondition('fileType', 'required')" [value]="null">None</mat-option>
                <mat-option *ngFor="let fileType of ordinals.fileType" [value]="fileType">
                  {{ fileType }}</mat-option>
              </mat-select>
              <mat-error *ngIf="showError('fileType')">File Type is mandatory </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('visibility', 'show')"
          [ngClass]="{ disable: checkCondition('visibility', 'disabled') }">
          <label>
            <div class="margin-top-xs flex flex-middle">
              <b [ngClass]="{ required: checkCondition('visibility', 'required') }">Allow preview in draft mode
                for others</b>
              <mat-icon *ngIf="contentForm.controls.visibility.value === 'Public'"
                matTooltip="Click to copy the private url" class="margin-left-xs pointer"
                (click)="copyData('previewUrl')">file_copy
              </mat-icon>
              <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('previewUrl')">info
              </mat-icon>
            </div>
            <span *ngIf="infoType === 'previewUrl'">Anyone with this URL can see the content</span>
          </label>
          <div class="margin-top-l">
            <mat-form-field appearance="outline" class="margin-top-s"
              [ngClass]="{ 'mat-form-field-invalid': showError('visibility') }">
              <mat-select formControlName="visibility" -placeholder placeholder="--Select--">
                <mat-option [value]="'Private'"> Don't Allow </mat-option>
                <mat-option [value]="'Public'"> Allow </mat-option>
              </mat-select>
              <mat-error *ngIf="showError('visibility')">The above feild is mandatory
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>

      <ng-template>
        Intended For
      </ng-template>
      <div class="margin-top-xl margin-right-l">
        <p class="mat-h5 margin-top-s margin-left-xl" *ngIf="checkCondition('audience', 'show')">
          * Provide meta details. Depending on the content type, some properties are enabled or
          disabled.
        </p>
        <div class="showInpoup">
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('audience', 'show')"
            [ngClass]="{ disable: checkCondition('audience', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Audience</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('audience')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'audience'">
                Add one or more targeted listeners for whom this content is intended for
              </span>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs width-90"
                [ngClass]="{ 'mat-form-field-invalid': showError('audience') }">
                <mat-chip-list #audienceChipList -aria-label aria-label="Audience selection">
                  <mat-chip *ngFor="let job of contentForm.controls.audience.value" [selectable]="selectable"
                    [removable]="removable" (removed)="removeFromFormControl(job, 'audience')">
                    {{ job }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="--Select--" #audienceView [formControl]="audienceCtrl"
                    [matChipInputFor]="audienceChipList" [matAutocomplete]="audienceAuto"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                    (matChipInputTokenEnd)="removeField($event)" />
                </mat-chip-list>
                <mat-autocomplete #audienceAuto="matAutocomplete"
                  (optionSelected)="addToFormControl($event, 'audience')">
                  <mat-option *ngIf="!checkCondition('audience', 'required')" [value]="null">None
                  </mat-option>
                  <mat-option *ngFor="let job of audienceList" [value]="job">
                    {{ job }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('audience')">Audience is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('org', 'show')"
            [ngClass]="{ disable: checkCondition('org', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Organisation</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('organisation')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'organisation'">
                Select your organisation below
              </span>
            </label>
            <div class="margin-top-s">
              <mat-form-field appearance="outline" class="margin-top-xs width-90"
                [ngClass]="{ 'mat-form-field-invalid': showError('org') }">
                <mat-select formControlName="org" -placeholder placeholder="--Select--" multiple>
                  <mat-select-trigger>
                    {{ contentForm.controls.org.value ? contentForm.controls.org.value[0] : '' }}
                    <span *ngIf="contentForm.controls.org.value" class="example-additional-selection">
                      (+{{ contentForm.controls.org.value.length - 1 }}
                      <ng-container *ngIf="contentForm.controls.org.value.length === 2">other</ng-container>
                      <ng-container *ngIf="contentForm.controls.org.value.length > 2">others</ng-container>
                      )
                    </span>
                  </mat-select-trigger>
                  <mat-option *ngFor="let org of ordinals.org" [value]="org">{{
                    org
                    }}</mat-option>
                </mat-select>
                <mat-error *ngIf="showError('org')">Organisation is mandatory </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <!-- till here-->
        <div class="">
          <div class="margin-top-xs margin-left-xl flex-1">
            <div class="margin-top-xs margin-bottom-s flex flex-middle">
              <div class="margin-top-xs width-90" *ngIf="checkCondition('region', 'show')"
                [ngClass]="{ disable: checkCondition('region', 'disabled') }">
                <label>
                  <b class="margin-remove-bottom">Region</b>
                </label>
                <div class="margin-top-xs">
                  <mat-form-field appearance="outline" class="margin-top-xs"
                    [ngClass]="{ 'mat-form-field-invalid': showError('region') }">
                    <mat-chip-list #regionChipList -aria-label aria-label="Region selection">
                      <mat-chip *ngFor="let region of contentForm.controls.region.value" [selectable]="selectable"
                        [removable]="removable" (removed)="removeFromFormControl(region, 'region')">
                        {{ region }}
                        <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                      </mat-chip>
                      <input -placeholder placeholder="Search by region" #regionView [formControl]="regionCtrl"
                        [matChipInputFor]="regionChipList" [matAutocomplete]="regionAuto"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                        (matChipInputTokenEnd)="removeField($event)" />
                    </mat-chip-list>
                    <mat-autocomplete #regionAuto="matAutocomplete"
                      (optionSelected)="addToFormControl($event, 'region')">
                      <mat-option *ngFor="let region of regionList" [value]="region">
                        {{ region }}
                      </mat-option>
                    </mat-autocomplete>
                    <mat-error class="error-font" *ngIf="showError('region')">Region is mandatory
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <!--Show in popup-->
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('accessPaths', 'show')"
            [ngClass]="{ disable: checkCondition('accessPaths', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Access Restrictions</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('accessPaths')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'accessPaths'">
                Restrict access to your content by choosing your preference below
              </span>
            </label>
            <div class="margin-top-s">
              <mat-form-field appearance="outline" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('accessPaths') }">
                <mat-chip-list #accessPathChipList -aria-label aria-label="Region selection">
                  <mat-chip *ngFor="let path of contentForm.controls.accessPaths.value" [selectable]="selectable"
                    [removable]="true" (removed)="removeFromFormControl(path, 'accessPaths')">
                    {{ path }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="Accessible by everyone" #accessPathsView
                    [formControl]="accessPathsCtrl" [matChipInputFor]="accessPathChipList"
                    [matAutocomplete]="accessPathAuto" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="false" (matChipInputTokenEnd)="removeField($event)" />
                </mat-chip-list>
                <mat-autocomplete #accessPathAuto="matAutocomplete"
                  (optionSelected)="addToFormControl($event, 'accessPaths')">
                  <mat-option *ngFor="let path of accessPathList" [value]="path">
                    {{ path }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('accessPaths')">Region is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="">
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('jobProfile', 'show')"
            [ngClass]="{ disable: checkCondition('jobProfile', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Job Profiles</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('jobProfile')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'jobProfile'">
                Add one or more targeted listeners for whom this content is intended for
              </span>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs width-90"
                [ngClass]="{ 'mat-form-field-invalid': showError('jobProfile') }">
                <mat-chip-list #jobProfileChipList -aria-label aria-label="Job profile selection">
                  <mat-chip *ngFor="let job of contentForm.controls.jobProfile.value" [selectable]="selectable"
                    [removable]="removable" (removed)="removeFromFormControl(job, 'jobProfile')">
                    {{ job }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="--Select--" #jobProfileView [formControl]="jobProfileCtrl"
                    [matChipInputFor]="jobProfileChipList" [matAutocomplete]="jobProfileAuto"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                    (matChipInputTokenEnd)="removeField($event)" />
                </mat-chip-list>
                <mat-autocomplete #jobProfileAuto="matAutocomplete"
                  (optionSelected)="addToFormControl($event, 'jobProfile')">
                  <mat-option *ngIf="!checkCondition('jobProfile', 'required')" [value]="null">None
                  </mat-option>
                  <mat-option *ngFor="let job of jobProfileList" [value]="job">
                    {{ job }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('jobProfile')">Job Profile is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

      </div>

      <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('skills', 'show')"
        [ngClass]="{ disable: checkCondition('skills', 'disabled') }">
        <label>
          <div class="margin-top-xs flex flex-middle">
            <b [ngClass]="{ required: checkCondition('skills', 'required') }">Skills</b>
            <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('skills')">info
            </mat-icon>
          </div>
          <span *ngIf="infoType === 'skills'">Add one or more skills associated with this content</span>
        </label>
        <div class="margin-top-xs flex margin-right-xl" [ngClass]="{ 'mat-form-field-invalid': showError('skills') }">
          <mat-form-field class="keywords-chip-list margin-top-xs flex-grow80" appearance="outline">
            <mat-chip-list #skills aria-label="Keyword selection">
              <mat-chip *ngFor="let key of contentForm.controls.skills.value" [selectable]="selectable"
                [removable]="removable" (removed)="removeSkill(key)">
                {{ key }}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input -placeholder formControlName="skills" placeholder="Skills" #skillsView [matChipInputFor]="skills"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true" />
            </mat-chip-list>
            <mat-select [compareWith]="compareSkillFn" formControlName="skills" placeholder="--Select--"
              [required]="checkCondition('skills', 'required')" multiple>
              <mat-option *ngFor="let skill of ordinals.skills" [value]="skill">
                {{ skill.name }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <mat-error *ngIf="showError('skills')">Skills is mandatory </mat-error>
      </div>

      <div class="margin-top-xs margin-left-xl margin-right-l flex-1" *ngIf="checkCondition('idealScreenSize', 'show')"
        [ngClass]="{ disable: checkCondition('idealScreenSize', 'disabled') }">
        <label>
          <div class="margin-top-s flex flex-middle">
            <b [ngClass]="{ required: checkCondition('idealScreenSize', 'required') }">Best viewed in</b>
            <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('bestViewedIn')">info
            </mat-icon>
          </div>
          <span *ngIf="infoType === 'bestViewedIn'">
            The preferred screen for this content
          </span>
        </label>
        <div class="margin-top-s">
          <mat-form-field appearance="outline" class="margin-top-xs"
            [ngClass]="{ 'mat-form-field-invalid': showError('idealScreenSize') }">
            <mat-select formControlName="idealScreenSize" -placeholder placeholder="--Select--">
              <mat-option *ngIf="!checkCondition('idealScreenSize', 'required')" [value]="null">None
              </mat-option>
              <mat-option [value]="'7'"> Mobile</mat-option>
              <mat-option [value]="'10'"> Tablet</mat-option>
              <mat-option [value]="'13'"> Desktop</mat-option>
            </mat-select>
            <mat-error *ngIf="showError('idealScreenSize')">Best viewed in is mandatory
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="margin-top-xl margin-right-l">
        <div class="">
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('trackContacts', 'show')"
            [ngClass]="{ disable: checkCondition('trackContacts', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Reviewers</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('reviewers')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'reviewers'">
                Person who can review this content
              </span>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('trackContacts') }">
                <mat-chip-list #reviewerChipList -aria-label aria-label="Reviewer selection">
                  <mat-chip *ngFor="let author of contentForm.controls.trackContacts.value" [selectable]="selectable"
                    [removable]="removable" (removed)="removeEmployee(author, 'trackContacts')">
                    {{ author.name }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="Search by mail" #trackContactsView [formControl]="trackContactsCtrl"
                    [matChipInputFor]="reviewerChipList" [matAutocomplete]="reivewerAuto"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                    (matChipInputTokenEnd)="removeField($event)" />
                </mat-chip-list>
                <mat-autocomplete #reivewerAuto="matAutocomplete"
                  (optionSelected)="addEmployee($event, 'trackContacts')">
                  <mat-option *ngIf="fetchTagsStatus === 'fetching'">Fetching users...</mat-option>
                  <mat-option *ngIf="fetchTagsStatus === 'done' && !employeeList.length">
                    No user found. Please check the value entered.</mat-option>
                  <mat-option *ngFor="let author of employeeList" [value]="author">
                    {{ author.displayName }} | {{ author.mail }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('trackContacts')">Reviewer is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>

        </div>
      </div>

      <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('publisherDetails', 'show')"
        [ngClass]="{ disable: checkCondition('publisherDetails', 'disabled') }">
        <!--Show in popup--> <label>
          <div class="margin-top-xs flex flex-middle">
            <b [ngClass]="{ required: checkCondition('publisherDetails', 'required') }">Publishers</b>
            <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('publishers')">info
            </mat-icon>
          </div>
          <span *ngIf="infoType === 'publishers'">
            Person who can publish this content
          </span>
        </label>
        <div class="margin-top-xs">
          <mat-form-field appearance="outline" class="margin-top-xs" class="margin-top-xs"
            [ngClass]="{ 'mat-form-field-invalid': showError('publisherDetails') }">
            <mat-chip-list #publisherChipList aria-label="Publisher selection">
              <mat-chip *ngFor="let author of contentForm.controls.publisherDetails.value" [selectable]="selectable"
                [removable]="removable" (removed)="removeEmployee(author, 'publisherDetails')">
                {{ author.name }}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input -placeholder placeholder="Search by mail" #publisherDetailsView
                [formControl]="publisherDetailsCtrl" [matChipInputFor]="publisherChipList"
                [matAutocomplete]="publisherAuto" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="false" (matChipInputTokenEnd)="removeField($event)" />
            </mat-chip-list>
            <mat-autocomplete #publisherAuto="matAutocomplete"
              (optionSelected)="addEmployee($event, 'publisherDetails')">
              <mat-option *ngIf="fetchTagsStatus === 'fetching'">Fetching users...</mat-option>
              <mat-option *ngIf="fetchTagsStatus === 'done' && !employeeList.length">
                No user found. Please check the value entered.</mat-option>
              <mat-option *ngFor="let author of employeeList" [value]="author">
                {{ author.displayName }} | {{ author.mail }}
              </mat-option>
            </mat-autocomplete>
            <mat-error class="error-font" *ngIf="showError('publisherDetails')">Publisher is mandatory
            </mat-error>
          </mat-form-field>
        </div>
        <!--Show in popup-->
      </div>

      <div class="margin-right-l">
        <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('keywords', 'show')"
          [ngClass]="{ disable: checkCondition('keywords', 'disabled') }">
          <label>
            <div class="margin-top-xs flex flex-middle">
              <b [ngClass]="{ required: checkCondition('keywords', 'required') }">Keywords</b>
              <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('keyword')">info
              </mat-icon>
              <mat-icon class="float-right margin-left-xs cursor-pointer" *ngIf="
                      contentForm.controls.keywords.value &&
                      contentForm.controls.keywords.value.length
                    " (click)="copyData('keyword')">
                file_copy
              </mat-icon>
            </div>
            <span *ngIf="infoType === 'keyword'">Add relevant tags to your content. Press Enter after each
              keyword.
            </span>
          </label>
          <div class="margin-top-xs flex margin-right-xl">
            <mat-form-field class="keywords-chip-list margin-top-xs flex-grow80" appearance="outline"
              [ngClass]="{ 'mat-form-field-invalid': showError('keywords') }">
              <mat-chip-list #keywords aria-label="Keyword selection">
                <mat-chip *ngFor="let key of contentForm.controls.keywords.value" [selectable]="selectable"
                  [removable]="removable" (removed)="removeKeyword(key)">
                  {{ key }}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input -placeholder [formControl]="keywordsCtrl" [matAutocomplete]="auto" placeholder="Search Keywords"
                  #keywordsView [matChipInputFor]="keywords" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                  [matChipInputAddOnBlur]="false" (matChipInputTokenEnd)="addKeyword($event)" #keywordsSearch />
              </mat-chip-list>
            </mat-form-field>
            <mat-autocomplete #auto="matAutocomplete" autoActiveFirstOption
              (optionSelected)="optionSelected($event.option.value); keywordsView.value = ''">
              <mat-option *ngIf="keywordsSearch.value" [value]="keywordsSearch.value">{{ keywordsSearch.value }}
              </mat-option>
              <mat-option *ngFor="let option of filteredOptions$ | async" [value]="option">{{ option }}
              </mat-option>
            </mat-autocomplete>
          </div>
        </div>
      </div>

      <div class="margin-top-xs margin-left-xl margin-right-l flex-1" *ngIf="checkCondition('learningMode', 'show')"
        [ngClass]="{ disable: checkCondition('learningMode', 'disabled') }">
        <label [ngClass]="{ required: checkCondition('learningMode', 'required') }">
          <b>Mode</b>
        </label>
        <div class="margin-top-l">
          <mat-form-field appearance="outline" class="margin-top-s"
            [ngClass]="{ 'mat-form-field-invalid': showError('learningMode') }">
            <mat-select formControlName="learningMode" -placeholder placeholder="--Select--">
              <mat-option *ngIf="!checkCondition('learningMode', 'required')" [value]="null">None
              </mat-option>
              <mat-option *ngFor="let learningMode of ordinals.learningMode" [value]="learningMode">
                {{ learningMode }}</mat-option>
            </mat-select>
            <mat-error *ngIf="showError('learningMode')">Mode is mandatory </mat-error>
          </mat-form-field>
        </div>
      </div>

      <ng-template>
        Stakeholders
      </ng-template>
      <div class="margin-top-xl margin-right-l">
        <div class="">
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('creatorContacts', 'show')"
            [ngClass]="{ disable: checkCondition('creatorContacts', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Curators / Contacts</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('coAuthors')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'coAuthors'">
                Person responsible for the content
              </span>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('creatorContacts') }">
                <mat-chip-list #creatorChipList aria-label="Creator selection">
                  <mat-chip *ngFor="let author of contentForm.controls.creatorContacts.value" [selectable]="selectable"
                    [removable]="removable" (removed)="removeEmployee(author, 'creatorContacts')">
                    {{ author.name }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="Search by mail" #creatorContactsView
                    [formControl]="creatorContactsCtrl" [matChipInputFor]="creatorChipList"
                    [matAutocomplete]="creatorAuto" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="false" (matChipInputTokenEnd)="removeField($event)" />
                </mat-chip-list>
                <mat-autocomplete #creatorAuto="matAutocomplete"
                  (optionSelected)="addEmployee($event, 'creatorContacts')">
                  <mat-option *ngIf="fetchTagsStatus === 'fetching'">Fetching users...</mat-option>
                  <mat-option *ngIf="fetchTagsStatus === 'done' && !employeeList.length">
                    No user found. Please check the value entered.</mat-option>
                  <mat-option *ngFor="let author of employeeList" [value]="author">
                    {{ author.displayName }} | {{ author.mail }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('creatorContacts')">Contributor is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <!--Show in popup -->
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('creatorDetails', 'show')"
            [ngClass]="{ disable: checkCondition('creatorDetails', 'disabled') }">
            <label>
              <div class="margin-top-xs flex flex-middle">
                <b>Authors</b>
                <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('authors')">info
                </mat-icon>
              </div>
              <span *ngIf="infoType === 'authors'">
                Authors who are creating the content
              </span>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('creatorDetails') }">
                <mat-chip-list #creatorDetailsChipList aria-label="Original Author selection">
                  <mat-chip *ngFor="let author of contentForm.controls.creatorDetails.value" [selectable]="selectable"
                    [removable]="removable" (removed)="removeCreatorDetails(author)">
                    {{ author.name }}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                  </mat-chip>
                  <input -placeholder placeholder="Enter name" #creatorDetailsView [formControl]="creatorDetailsCtrl"
                    [matChipInputFor]="creatorDetailsChipList" [matAutocomplete]="originalAuthorsAuto"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                    (matChipInputTokenEnd)="addCreatorDetails($event)" />
                </mat-chip-list>
                <mat-autocomplete #originalAuthorsAuto="matAutocomplete"
                  (optionSelected)="addEmployee($event, 'creatorDetails')">
                  <mat-option *ngIf="fetchTagsStatus === 'fetching'">Fetching users...</mat-option>
                  <mat-option *ngIf="fetchTagsStatus === 'done' && !employeeList.length">
                    No user found. Please check the value entered.</mat-option>
                  <mat-option *ngFor="let author of employeeList" [value]="author">
                    {{ author.displayName }} | {{ author.mail }}
                  </mat-option>
                </mat-autocomplete>
                <mat-error class="error-font" *ngIf="showError('creatorDetails')">Original Authors is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <!--Show in popup-->
        </div>
      </div>
    </div>
    <!--added end-->
    <div class="margin-top-xl margin-right-l">
      <div class="grid"></div>
      <div class="flex flex-end margin-top-l margin-bottom-l margin-right-l">
        <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white margin-right-m"
          (click)="sideNavBarOpened=false">
          <span class="text-white">Cancel</span>
        </button>
        <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white"
          (click)="data.emit('push'); isSubmitPressed = true">
          <span class="text-white">
            Save
          </span>
        </button>
      </div>
    </div>

  </mat-sidenav>

  <mat-sidenav-content class="sidenav-content">
    <div id="edit-meta" class="margin-left-xl margin-top-l">

      <div class="margin-top-xl new-mobile margin-right-l">


        <div class="margin-top-s">
          <div class="margin-top-xs" *ngIf="checkCondition('name', 'show')"
            [ngClass]="{ disable: checkCondition('name', 'disabled') }">
            <p class="font-weight-bold margin-remove-bottom"="Title label|Label which explains the user to enter title"
              [ngClass]="{ required: checkCondition('name', 'required') }">
              Title
            </p>
            <mat-form-field appearance="outline" class="margin-top-xs"
              [ngClass]="{ 'mat-form-field-invalid': showError('name') }">
              <input matInput #name formControlName="name" maxlength="500" -placeholder
                placeholder="Enter a Descriptive title" [required]="checkCondition('name', 'required') ? true : null" />
              <mat-hint align="end">{{ name.value.length }} / 500</mat-hint>
              <mat-error *ngIf="showError('name')"="Name Error|Explains name is required">
                Title is mandatory
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="margin-top-s">
          <div *ngIf="checkCondition('description', 'show')"
            [ngClass]="{ disable: checkCondition('description', 'disabled') }">
            <mat-label class="font-weight-bold"="Subtitle label|Label which explains the user to enter Subtitle"
              [ngClass]="{ required: checkCondition('description', 'required') }">
              Short/Card Description</mat-label>
            <mat-form-field appearance="outline" class="margin-top-xs"
              [ngClass]="{ 'mat-form-field-invalid': showError('description') }">
              <textarea cdkTextareaAutosize name="description" #description class="resize-none"
                [matTextareaAutosize]="true" maxlength="2000" matInput rows="3" formControlName="description"
                -placeholder placeholder="Description will appear on card"
                [required]="checkCondition('description', 'required') ? true : null">
            </textarea>
              <mat-hint align="end">{{ description.value.length }} / 2000</mat-hint>
              <mat-error *ngIf="showError('description')">Description is mandatory
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="margin-top-m flex justify-start">
          <h2> <b> Basic Settings </b>| <a (click)="sideNavBarOpened=true" class="ws-mat-default-text cursor-pointer">
              Advanced
              Settings </a></h2>
        </div>

        <div class="">

          <div class="flex flex-column">
            <div class="margin-top-xs margin-left-l" *ngIf="checkCondition('appIcon', 'show')"
              [ngClass]="{ disable: checkCondition('appIcon', 'disabled') }">
              <label>
                <div class="margin-top-xs flex flex-middle"
                  [ngClass]="{ required: checkCondition('appIcon', 'required') }">
                  <b>Thumbnail</b>
                  <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('appIcon')">info
                  </mat-icon>
                </div>
                <span *ngIf="infoType === 'appIcon'">
                  Maximum file size - 1 MB
                </span>
              </label>
              <div class="margin-top-xs">
                <img alt="logo" class="image max-width" [ngClass]="{
                      'image-border': showError('appIcon'),
                      'ws-mat-warn-text': showError('appIcon')
                    }" height="150" width="256" [src]="contentForm.controls.appIcon.value | relativeUrl"
                  (error)="changeToDefaultImg($event)" />
                <div class="photo mat-elevation-z4 mat-app-background" (click)="uploadThumbnail.click()">
                  <mat-icon class="photo-icon ws-mat-primary-text">photo_camera</mat-icon>
                  <input type="file" #uploadThumbnail
                    (change)="uploadAppIcon($event.target.files[0]); uploadThumbnail.value = null"
                    style="display: none;" [accept]="imageTypes.toString()" />
                </div>
              </div>
            </div>

            <div class="flex margin-left-l">
              <div style="width: 230px;" class="flex flex-column  margin-right-m margin-top-m">
                <div class="margin-bottom-m" *ngIf="checkCondition('expiryDate', 'show')"
                  [ngClass]="{ disable: checkCondition('expiryDate', 'disabled') }">
                  <mat-label class="font-weight-bold"
                    [ngClass]="{ required: checkCondition('expiryDate', 'required') }"="
                        Content expiration date label|Label which explains the user to choose content
                        expiration date
                      ">
                    Expires On</mat-label>
                  <br />
                  <mat-checkbox [checked]="canExpiry" (change)="assignExpiryDate()">Content can expire
                  </mat-checkbox>
                  <mat-form-field *ngIf="canExpiry" appearance="outline" class="margin-top-sm"
                    [ngClass]="{ 'mat-form-field-invalid': showError('expiryDate') }">
                    <input matInput formControlName="expiryDate" [matDatepicker]="picker" -placeholder
                      placeholder="Choose a date" [required]="checkCondition('expiryDate', 'required') ? true : null" />
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-error *ngIf="showError('expiryDate')">
                      Expiry Date is mandatory
                    </mat-error>
                  </mat-form-field>
                </div>
                <div *ngIf="checkCondition('duration', 'show')"
                  [ngClass]="{ disable: checkCondition('duration', 'disabled') }">
                  <p class="font-weight-bold margin-remove-bottom"
                    [ngClass]="{ required: checkCondition('duration', 'required') }">
                    <span>Duration</span>
                    <small>(hh:mm:ss)</small>
                  </p>
                  <p class="not-disable" *ngIf="
                        checkCondition('duration', 'disabled') &&
                        contentForm.controls.mimeType.value ===
                          'application/vnd.ekstep.content-collection'
                      ">
                    Auto calculated from children
                  </p>
                  <p class="not-disable" *ngIf="
                        checkCondition('duration', 'disabled') &&
                        ['application/x-mpegURL', 'audio/mpeg'].includes(
                          contentForm.controls.mimeType.value
                        )
                      ">
                    Auto calculated from duration of the file
                  </p>
                  <div class="flex">
                    <div class="flex">
                      <mat-form-field appearance="outline" class="duration-width"
                        [ngClass]="{ 'mat-form-field-invalid': showError('duration') }">
                        <input matInput class="numberInput" [(ngModel)]="hours" [ngModelOptions]="{ standalone: true }"
                          (keyup)="timeToSeconds()" type="number" placeholder="00" min="0" step="1" />
                      </mat-form-field>
                      <div class="margin-top-s padding-small">:</div>
                    </div>
                    <div class="flex">
                      <mat-form-field appearance="outline" class="duration-width"
                        [ngClass]="{ 'mat-form-field-invalid': showError('duration') }">
                        <input matInput class="numberInput" [(ngModel)]="minutes"
                          [ngModelOptions]="{ standalone: true }" (keyup)="timeToSeconds()" type="number"
                          placeholder="00" min="0" max="59" step="1" />
                      </mat-form-field>
                      <div class="margin-top-s padding-small">:</div>
                    </div>
                    <div>
                      <mat-form-field appearance="outline" class="duration-width"
                        [ngClass]="{ 'mat-form-field-invalid': showError('duration') }">
                        <input matInput class="numberInput" [(ngModel)]="seconds"
                          [ngModelOptions]="{ standalone: true }" (keyup)="timeToSeconds()" type="number"
                          placeholder="00" min="0" max="59" step="1" />
                        <mat-error *ngIf="showError('duration')"="Duration Error|Explains Duration is mandatory field">
                          Duration is mandatory
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex flex-column margin-left-l">

            <div class="margin-top-s" *ngIf="checkCondition('subTitle', 'show')"
              [ngClass]="{ disable: checkCondition('subTitle', 'disabled') }">
              <p class="font-weight-bold margin-remove-bottom"
                [ngClass]="{ required: checkCondition('subTitle', 'required') }">
                Subtitle
              </p>
              <mat-form-field appearance="outline" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('subTitle') }">
                <input matInput formControlName="subTitle" #subTitle maxlength="1000" -placeholder
                  placeholder="Enter subtitle here" [required]="checkCondition('subTitle', 'required') ? true : null" />
                <mat-hint align="end">{{ subTitle.value.length }} / 1000</mat-hint>
                <mat-error *ngIf="showError('subTitle')"="Subtitle Error|Explains Subtitle is required">
                  Subtitle is mandatory
                </mat-error>
              </mat-form-field>
            </div>

            <div class="margin-top-s" *ngIf="checkCondition('body', 'show')"
              [ngClass]="{ disable: checkCondition('body', 'disabled') }">
              <label>
                <div class="margin-top-xs flex flex-middle">
                  <b [ngClass]="{ required: checkCondition('body', 'required') }">Content Body (Long Description)
                  </b>
                  <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('contentBody')">info
                  </mat-icon>
                </div>
                <span *ngIf="infoType === 'contentBody'">
                  HTML supported Editor in case you'd like to provide more descriptive details
                </span>
              </label>
              <div class="margin-top-s margin-bottom-l" *ngIf="contentForm && contentForm.controls"
                [ngClass]="{ 'mat-form-field-invalid': showError('body') }">
                <ws-auth-plain-ckeditor [location]="location" [id]="contentMeta.identifier"
                  [content]="contentForm.controls.body.value || ''" (value)="updateContentService('body', $event)">
                </ws-auth-plain-ckeditor>
                <!-- <textarea (value)="updateContentService('body', $event)"></textarea> -->
              </div>
            </div>
          </div>

          <!-- <div class="flex flex-end margin-top-l margin-bottom-s margin-right-l">
            <button mat-raised-button type="button"
              class="text-white ws-mat-primary-background text-white margin-right-m" (click)="data.emit('save')">
              <span class="text-white" >Save</span>
            </button>
            <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white"
              (click)="formNext(1)">
              <span class="text-white" >Next</span>
            </button>
          </div> -->
        </div>
      </div>

      <div class="margin-top-xl ">
        <p class="mat-h5 margin-top-s margin-left-xl flex-1" *ngIf="checkCondition('contentType', 'show')">
          * Provide meta details. Depending on the content type, some properties are enabled or
          disabled.
        </p>
        <div class="margin-top-m ">
          <div class="margin-top-s margin-left-xl flex-1" *ngIf="checkCondition('contentType', 'show')"
            [ngClass]="{ disable: checkCondition('contentType', 'disabled') }">
            <label [ngClass]="{ required: checkCondition('contentType', 'required') }">
              <b>Content Category</b>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-xs"
                [ngClass]="{ 'mat-form-field-invalid': showError('contentType') }">
                <mat-select formControlName="contentType" -placeholder placeholder="--Select--"
                  [required]="checkCondition('contentType', 'required')">
                  <mat-option [value]="'Resource'">Resource</mat-option>
                  <mat-option [value]="'Course'">Course</mat-option>
                  <mat-option [value]="'Knowledge Board'"
                    *ngIf="contentMeta && contentMeta.contentType == 'Knowledge Board'">Knowledge Board</mat-option>
                  <mat-option [value]="'Knowledge Artifact'"
                    *ngIf="contentMeta && contentMeta.contentType == 'Knowledge Artifact'">Knowledge Artifact
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-error *ngIf="showError('contentType')">Content Category is mandatory
              </mat-error>
            </div>
          </div>
          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('resourceType', 'show')"
            [ngClass]="{ disable: checkCondition('resourceType', 'disabled') }">
            <label [ngClass]="{ required: checkCondition('resourceType', 'required') }">
              <b *ngIf="isSiemens">Format</b>
              <b *ngIf="!isSiemens">Category Type</b>
            </label>
            <div class="margin-top-xs">
              <mat-form-field appearance="outline" class="margin-top-s"
                [ngClass]="{ 'mat-form-field-invalid': showError('resourceType') }">
                <mat-select formControlName="resourceType" placeholder="--Select--"
                  [required]="checkCondition('resourceType', 'required')">
                  <mat-option *ngIf="!checkCondition('resourceType', 'required')" [value]="null">None
                  </mat-option>
                  <mat-option *ngFor="let resource of ordinals.resourceType" [value]="resource">
                    {{ resource }}</mat-option>
                </mat-select>
                <mat-error *ngIf="showError('resourceType')">Category Type is mandatory
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="">



          <div class="margin-top-xs margin-left-xl flex-1" *ngIf="checkCondition('sourceName', 'show')"
            [ngClass]="{ disable: checkCondition('sourceName', 'disabled') }">
            <label [ngClass]="{ required: checkCondition('sourceName', 'required') }">
              <b>Provider/Source</b>
            </label>
            <div class="margin-top-l">
              <mat-form-field appearance="outline" class="margin-top-s"
                [ngClass]="{ 'mat-form-field-invalid': showError('sourceName') }">
                <mat-select formControlName="sourceName" -placeholder placeholder="--Select--">
                  <mat-option *ngIf="!checkCondition('sourceName', 'required')" [value]="null">None</mat-option>
                  <mat-option *ngFor="let sourceName of ordinals.sourceName" [value]="sourceName">
                    {{ sourceName }}</mat-option>
                </mat-select>
                <mat-error *ngIf="showError('sourceName')">Source is mandatory </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="">
          <div class="margin-top-m margin-left-xl flex-1" *ngIf="checkCondition('catalogPaths', 'show')"
            [ngClass]="{ disable: checkCondition('catalogPaths', 'disabled') }">
            <!-- <label> -->
            <div class="margin-top-s flex flex-middle">
              <b [ngClass]="{ required: checkCondition('catalogPaths', 'required') }">Catalog</b>
              <mat-icon class="ws-mat-primary-text margin-left-xs pointer" (click)="showInfo('catalogPaths')">info
              </mat-icon>
              <button mat-button (click)="openCatalogSelector()"
                class="ws-mat-primary-text font-weight-500 flex flex-middle cursor-pointer">
                <mat-icon>add</mat-icon>
                <span>
                  UPDATE
                </span>
              </button>
            </div>
            <span *ngIf="infoType === 'catalogPaths'">
              Select the tags for placement of your content in the catalog
            </span>
            <!-- </label> -->
            <div class="margin-top-l flex margin-right-xl"
              [ngClass]="{ 'mat-form-field-invalid': showError('catalogPaths') }">
              <mat-form-field *ngIf="(contentForm.controls.catalogPaths.value || []).length > 0"
                class="catalogwords-chip-list margin-top-xs flex-grow80" appearance="outline">
                <mat-chip-list #catalogs *ngFor="
                      let catalog of contentForm.controls.catalogPaths.value.slice(
                        0,
                        showMoreGlance ? undefined : 5
                      );
                      let i = index
                    " -aria-label aria-label="Catalog selection">
                  <mat-chip [selectable]="false" [removable]="false">
                    {{ catalog }}
                  </mat-chip>
                </mat-chip-list>
                <button *ngIf="(contentForm.controls.catalogPaths.value || []).length > 5" mat-button
                  (click)="showMoreGlance = !showMoreGlance">
                  <mat-icon>{{ !showMoreGlance ? 'arrow_drop_down' : 'arrow_drop_up' }}</mat-icon>
                  <ng-container *ngIf="!showMoreGlance">Show More</ng-container>
                  <ng-container *ngIf="showMoreGlance">Show Less</ng-container>
                </button>
                <mat-error *ngIf="showError('catalogPaths')">Catalog is mandatory
                </mat-error>
              </mat-form-field>
            </div>
            <p
              *ngIf="!(contentForm.controls.catalogPaths && contentForm.controls.catalogPaths.value &&  contentForm.controls.catalogPaths.value.length)">
              0 Catalog Selected
            </p>
          </div>
        </div>
        <!-- <div class="flex flex-end margin-top-l margin-bottom-l margin-right-l">
            <button mat-raised-button type="button"
              class="text-white ws-mat-primary-background text-white margin-right-m" (click)="data.emit('save')">
              <span class="text-white" >Save</span>
            </button>
            <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white"
              (click)="formNext(2)">
              <span class="text-white" >Next</span>
            </button>
          </div> -->
      </div>

      <!-- <div class="margin-top-xl margin-right-l">
        <div class="grid"></div>
        <div class="flex flex-end margin-top-l margin-bottom-l margin-right-l">
          <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white margin-right-m"
            (click)="data.emit('save')">
            <span class="text-white" >Save</span>
          </button>
          <button mat-raised-button type="button" class="text-white ws-mat-primary-background text-white"
            (click)="data.emit('push'); isSubmitPressed = true">
            <span class="text-white" >
              Done
            </span>
          </button>
        </div>
      </div> -->







    </div>
  </mat-sidenav-content>
</form>